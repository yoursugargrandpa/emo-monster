<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8">
    <title>æƒ…æ„Ÿæ€ªç¸ - SVG ç‰ˆ</title>
    <style>
        body { font-family: system-ui; background: #f5f5f5; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background: white; border-radius: 8px; padding: 20px; }
        h1 { text-align: center; color: #ff6b6b; }
        .main { display: flex; gap: 30px; }
        svg { border: 2px solid #333; background: white; }
        .panel { flex: 0 0 200px; }
        button { display: block; width: 100%; padding: 12px; margin: 8px 0; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .emotion { background: white; border: 2px solid #ff6b6b; color: #ff6b6b; }
        .emotion:hover { background: #ffe0e0; }
        .primary { background: #ff6b6b; color: white; }
        .secondary { background: #4ecdc4; color: white; }
        .info { background: #f9f9f9; padding: 12px; border-radius: 4px; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ æƒ…æ„Ÿæ€ªç¸ - SVG ç‰ˆ</h1>
        
        <div class="main">
            <svg id="svg" width="400" height="300" viewBox="0 0 400 300">
                <rect width="400" height="300" fill="white"/>
            </svg>
            
            <div class="panel">
                <button class="emotion" onclick="addColor('#ff6b6b')">ğŸ˜  ç”Ÿæ°£</button>
                <button class="emotion" onclick="addColor('#6bcaff')">ğŸ˜¢ é›£é</button>
                <button class="emotion" onclick="addColor('#ffd93d')">ğŸ˜Š å¿«æ¨‚</button>
                
                <button class="primary" onclick="exportSVG()" style="margin-top: 15px;">ğŸ“¥ åŒ¯å‡º</button>
                <button class="secondary" onclick="clearAll()">ğŸ”„ æ¸…é™¤</button>
                
                <div class="info">
                    <p><strong>å·²æ·»åŠ ï¼š</strong><span id="count">0</span></p>
                    <p><strong>é¡è‰²ï¼š</strong><span id="color">#ffffff</span></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        var svg = document.getElementById('svg');
        var colors = [];
        var opacity = 0.6;
        
        function addColor(color) {
            colors.push(color);
            draw();
        }
        
        function draw() {
            // æ¸…ç©ºä¹‹å‰çš„åœ“å½¢ï¼ˆä¿ç•™èƒŒæ™¯ï¼‰
            var circles = svg.querySelectorAll('circle');
            for (var i = 0; i < circles.length; i++) {
                circles[i].remove();
            }
            
            // ç•«æ–°åœ“å½¢
            for (var i = 0; i < colors.length; i++) {
                var circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', '200');
                circle.setAttribute('cy', '150');
                circle.setAttribute('r', '60');
                circle.setAttribute('fill', colors[i]);
                circle.setAttribute('opacity', opacity);
                svg.appendChild(circle);
            }
            
            // æ›´æ–°ä¿¡æ¯
            document.getElementById('count').textContent = colors.length;
            updateColor();
        }
        
        function updateColor() {
            if (colors.length === 0) {
                document.getElementById('color').textContent = '#ffffff';
                return;
            }
            
            var r = 0, g = 0, b = 0;
            for (var i = 0; i < colors.length; i++) {
                var hex = colors[i].replace('#', '');
                r += parseInt(hex.substr(0, 2), 16);
                g += parseInt(hex.substr(2, 2), 16);
                b += parseInt(hex.substr(4, 2), 16);
            }
            
            r = Math.round(r / colors.length);
            g = Math.round(g / colors.length);
            b = Math.round(b / colors.length);
            
            var result = '#' + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('');
            document.getElementById('color').textContent = result;
        }
        
        function clearAll() {
            colors = [];
            draw();
        }
        
        function exportSVG() {
            var svgData = svg.outerHTML;
            var blob = new Blob([svgData], { type: 'image/svg+xml' });
            var url = URL.createObjectURL(blob);
            var a = document.createElement('a');
            a.href = url;
            a.download = 'emo-monster.svg';
            a.click();
        }
    </script>
</body>
</html>
