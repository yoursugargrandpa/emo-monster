# 🎬 視覺效果與動畫設計

## 粒子效果系統

### 1. 怪獸孵化粒子
```javascript
色彩: 怪獸顏色
數量: particleCount（可調，預設 18）
大小: particleSize（可調，預設 6px）
持續時間: 600-800ms
運動: 向外放射，漸淡
頻率: 單次爆發
```

### 2. 進化粒子
```javascript
色彩: 怪獸顏色
數量: 50+ 粒子
大小: 8-12px
持續時間: 1000ms
運動: 向上飄升，漸淡
頻率: 3 次連續爆發（200ms 間隔）
```

### 3. 購物粒子
```javascript
色彩: 金色 (#ffd54f)
數量: 15-25
大小: 4-8px
持續時間: 400-600ms
運動: 向上螺旋
頻率: 購買物品時
```

### 4. 獎勵粒子
```javascript
色彩: 綠色 (#8bc34a)
數量: 20-30
大小: 6-10px
持續時間: 800ms
運動: 爆發 + 下落
頻率: 完成挑戰時
```

## 音效設計

### 音效庫

| 音效名 | 用途 | 音頻特性 |
|--------|------|---------|
| Pop | 一般互動、按鈕點擊 | 高音、短促、200ms |
| Ding | 成功、升級完成 | 清晰鈴聲、300ms |
| Whoosh | 頁面過渡 | 風聲、快速、150ms |
| Sparkle | 購物、特殊事件 | 亮晶晶、200ms |
| Chime | 通知、重要事件 | 多音、500ms |

### 音量控制
```javascript
預設音量: 0.18 (18%)
調整範圍: 0-1
儲存位置: localStorage emo_settings
可由用戶調整: 是
```

## 過渡與動畫

### 頁面加載
```css
動畫: fadeIn + slideUp
持續時間: 300ms
延遲: 分階段（每個元素 50ms）
緩動: cubic-bezier(0.4, 0, 0.2, 1)
```

### 按鈕互動
```css
Hover: translateY(-2px) + shadowLift
Active: translateY(0)
持續時間: 150ms
反饋: 即時視覺回應
```

### Modal 出現
```css
動畫: slideUp + fadeIn
背景: 模糊（4px）
遮罩色: rgba(0,0,0,0.5)
持續時間: 300ms
可關閉: 點擊背景 / 按鈕
```

### 進化動畫序列
```javascript
1. Modal 震動 (200ms)
2. 按鈕禁用，顯示加載狀態
3. 三次粒子爆發（200ms 間隔）
4. 配色脈動（opacity 0.6 - 1）
5. 音效反饋 × 3
6. Modal 關閉（600ms 後）
```

### 怪獸預覽動畫
```css
正常: scale(1)
動畫中: scale(1.18)
過渡: 620ms cubic-bezier(.2,.9,.3,1)
觸發: 孵化、進化完成
```

## 色彩轉換動畫

### 色彩混合過程
```javascript
過程: 實時顯示當前混合色
更新頻率: 每次拖放後
動畫: 無（立即更新）
反饋: 顏色代碼顯示
```

### 進度指示
```css
經驗值條:
  - 背景色: 淺灰色
  - 填充色: 主色漸層
  - 高度: 4px
  - 圓角: 2px
  - 過渡: 300ms
```

## 反饋設計原則

### 視覺反饋層級
1. **即時反饋** (0-100ms)
   - 按鈕按壓視覺變化
   - 色彩變化
   - 光標變化

2. **快速反饋** (100-300ms)
   - 小型動畫
   - 色彩過渡
   - 位置變化

3. **標準反饋** (300-600ms)
   - 頁面過渡
   - Modal 動畫
   - 粒子效果

4. **延遲反饋** (600ms+)
   - 加載完成
   - 複雜動畫序列
   - 多步操作

### 反饋組合示例

#### 購買物品
```
1. 按鈕 Hover (即時)
2. 按鈕按壓 (即時)
3. 購物金幣粒子 (快速, 400ms)
4. 音效播放 (快速, 200ms)
5. 背包更新 (標準, 300ms)
```

#### 孵化怪獸
```
1. 按鈕反饋 (即時)
2. 怪獸預覽脈動 (快速, 100ms)
3. 粒子爆發 (標準, 600ms)
4. 音效播放 (標準, 200ms)
5. 獲得通知 (標準, 300ms)
```

## 無障礙動畫

### prefers-reduced-motion 支援
```css
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
```

### 動畫禁用選項
- 用戶可在設定中禁用所有動畫
- 功能不受影響，僅視覺變化被簡化

## 性能優化

### 粒子系統
- 粒子數量限制: 最多 100 個
- 使用 requestAnimationFrame 優化
- 自動垃圾回收完成的粒子

### CSS 動畫
- 優先使用 transform 和 opacity
- 避免重排（reflow）
- 使用硬件加速（will-change）

### 音效播放
- 預加載關鍵音效
- 最多同時 2-3 個聲音
- 自動音量標準化

## 黑暗模式支援（未來）

```css
@media (prefers-color-scheme: dark) {
  :root {
    --bg-light: #1a1a1a;
    --bg-dark: #ffffff;
    --text-light: #2d3436;
    --text-dark: #ffffff;
    /* ... 更多適配 */
  }
}
```

---

實作時間：2026-01-02
設計者：UX/UI 團隊
最後更新：2026-01-02
